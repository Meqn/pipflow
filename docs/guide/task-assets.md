# é™æ€èµ„æºä»»åŠ¡ {#assets-task}

ä»»åŠ¡ç±»å‹ä¸º `static` æˆ– `image` ã€‚

é™æ€èµ„æºåŒ…å«å¸¸è§çš„å›¾åƒã€åª’ä½“å’Œå­—ä½“æ–‡ä»¶ç­‰ã€‚å¦‚æœä¸æƒ³å¤„ç†è¿™äº›é™æ€èµ„æºæ–‡ä»¶ï¼Œä½ å¯ä»¥å°†å®ƒä»¬æ”¾åœ¨ `public` ç›®å½•ä¸‹ã€‚



## ä»»åŠ¡æµç¨‹ {#process-flow}

- è‡ªå®šä¹‰å¤„ç†æµç¨‹ - å¤„ç† `pipflow.config.js` ä¸­æ·»åŠ çš„è‡ªå®šä¹‰ `plugins`
- å‹ç¼©å›¾ç‰‡ - åŸºäº `imagemin` å‹ç¼©å›¾ç‰‡
- ç”Ÿæˆæ–‡ä»¶hashåŠmanifestæ–‡ä»¶



## å›¾ç‰‡å‹ç¼©

ç”±äºå›¾ç‰‡å‹ç¼©æ˜¯ä¸€é¡¹è€—æ—¶çš„ä¸€æ¬¡æ€§ä»»åŠ¡ï¼Œä¸” `gulp-imagemin` æ’ä»¶**å®‰è£…ä¾èµ–ç»å¸¸å¤±è´¥**(å›½å†…ç¯å¢ƒ)ã€‚æ‰€ä»¥ `pipflow` å°† å‹ç¼©å›¾ç‰‡ä½œä¸ºä¸€ä¸ªå¯é€‰é¡¹ã€‚å¦‚æœä½ çš„é¡¹ç›®ä¸éœ€è¦ å‹ç¼©å›¾ç‰‡æˆ–è€…æ‰‹åŠ¨ä¸€æ¬¡æ€§å‹ç¼©ï¼Œè¯·åˆ é™¤é¡¹ç›®çš„ `package.json` ä¸­çš„ `gulp-imagemin` ä¾èµ–ï¼Œå¹¶å°† `imageMinify` é…ç½®é¡¹çš„å€¼è®¾ç½®ä¸º `false`ã€‚

å…³äºå›¾ç‰‡å‹ç¼©é…ç½®ï¼Œä½ å¯ä»¥ä¸ºæ‰€æœ‰é™æ€ä»»åŠ¡ç»Ÿä¸€é…ç½®ï¼Œä¹Ÿå¯ä»¥å•ç‹¬é…ç½®æŸä¸ªé™æ€ä»»åŠ¡ã€‚

1. ç»Ÿä¸€é…ç½®é¡¹ `build.imageMinify` , å…·ä½“è¯·çœ‹ [è¿™é‡Œ](../config/build-options.md#build-imageminify)ã€‚
2. å•ç‹¬ä»»åŠ¡é…ç½®é¡¹ `minify`ã€‚

```ts
ImageMinifyOptions : boolean | {
  plugins?: ImageMinifyPlugin[]
  options?: {
    verbose?: boolean
    silent?: boolean
  }
}
```



> `gulp-imagemin` æ’ä»¶åœ¨å‹ç¼©å›¾ç‰‡è¿‡ç¨‹ä¸­ä¼šè‡ªåŠ¨è¿‡æ»¤éå›¾ç‰‡æ–‡ä»¶ã€‚ å…·ä½“é…ç½®è¯·ç‚¹å‡» [è¿™é‡Œ](https://www.npmjs.com/package/gulp-imagemin)

::: warning ğŸš¨ æé†’
`gulp-imagemin` åªèƒ½å®‰è£… `<=7` çš„ç‰ˆæœ¬ï¼Œ`8`åŠä»¥ä¸Šç‰ˆæœ¬ä»…æ”¯æŒ `esModule` æ¨¡å—åŒ–.
:::

